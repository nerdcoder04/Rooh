import { DoshaType } from "@/types/prakriti";
import { dietData } from "./dietData";
import { routineData } from "./routineData";

export const downloadDietPlan = (dosha: DoshaType) => {
  const diet = dietData[dosha];
  
  const content = `
╔════════════════════════════════════════════════════════════╗
║                  ROOH WELLNESS - DIET PLAN                ║
║                 ${diet.name.toUpperCase()} DOSHA RECOMMENDATIONS              ║
╚════════════════════════════════════════════════════════════╝

📅 Generated: ${new Date().toLocaleDateString()}

═══════════════════════════════════════════════════════════════
                     RECOMMENDED FOODS
═══════════════════════════════════════════════════════════════

${diet.favorableFoods.map((food, i) => `${i + 1}. ${food}`).join('\n')}

═══════════════════════════════════════════════════════════════
                   FOODS TO LIMIT OR AVOID
═══════════════════════════════════════════════════════════════

${diet.avoidFoods.map((food, i) => `${i + 1}. ${food}`).join('\n')}

═══════════════════════════════════════════════════════════════
                   OPTIMAL MEAL TIMING
═══════════════════════════════════════════════════════════════

${diet.mealTiming.map((timing, i) => `${i + 1}. ${timing}`).join('\n')}

═══════════════════════════════════════════════════════════════
                      BEST BEVERAGES
═══════════════════════════════════════════════════════════════

${diet.beverages.map((bev, i) => `${i + 1}. ${bev}`).join('\n')}

═══════════════════════════════════════════════════════════════
                       EATING TIPS
═══════════════════════════════════════════════════════════════

${diet.tips.map((tip, i) => `${i + 1}. ${tip}`).join('\n')}

═══════════════════════════════════════════════════════════════

🕉️ Your Personalized ${diet.name} Dosha Diet Plan
Generated by Rooh Wellness Platform

For consultation and personalized guidance, visit www.roohwellness.com

═══════════════════════════════════════════════════════════════
`;

  const blob = new Blob([content], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = `Rooh_Diet_Plan_${diet.name}_${new Date().getTime()}.txt`;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(url);
};

export const downloadRoutinePlan = (dosha: DoshaType) => {
  const routine = routineData[dosha];
  
  const content = `
╔════════════════════════════════════════════════════════════╗
║             ROOH WELLNESS - DAILY ROUTINE GUIDE           ║
║              ${routine.name.toUpperCase()} DOSHA SCHEDULE                  ║
╚════════════════════════════════════════════════════════════╝

📅 Generated: ${new Date().toLocaleDateString()}

═══════════════════════════════════════════════════════════════
                   OPTIMAL SLEEP SCHEDULE
═══════════════════════════════════════════════════════════════

🌅 Wake Up: ${routine.wakeTime}
🌙 Sleep Time: ${routine.sleepTime}

═══════════════════════════════════════════════════════════════
                    MORNING ROUTINE
                    (6:00 AM - 10:00 AM)
═══════════════════════════════════════════════════════════════

${routine.morning.map((item, i) => `${i + 1}. ${item}`).join('\n')}

═══════════════════════════════════════════════════════════════
                   AFTERNOON ROUTINE
                   (10:00 AM - 6:00 PM)
═══════════════════════════════════════════════════════════════

${routine.afternoon.map((item, i) => `${i + 1}. ${item}`).join('\n')}

═══════════════════════════════════════════════════════════════
                    EVENING ROUTINE
                    (6:00 PM - 10:00 PM)
═══════════════════════════════════════════════════════════════

${routine.evening.map((item, i) => `${i + 1}. ${item}`).join('\n')}

═══════════════════════════════════════════════════════════════
               RECOMMENDED EXERCISES
═══════════════════════════════════════════════════════════════

${routine.exercise.map((ex, i) => `${i + 1}. ${ex}`).join('\n')}

═══════════════════════════════════════════════════════════════
                 DAILY WELLNESS TIPS
═══════════════════════════════════════════════════════════════

${routine.tips.map((tip, i) => `${i + 1}. ${tip}`).join('\n')}

═══════════════════════════════════════════════════════════════

🕉️ Your Personalized ${routine.name} Dosha Daily Routine
Generated by Rooh Wellness Platform

For consultation and personalized guidance, visit www.roohwellness.com

═══════════════════════════════════════════════════════════════
`;

  const blob = new Blob([content], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = `Rooh_Daily_Routine_${routine.name}_${new Date().getTime()}.txt`;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(url);
};

